# Анализатор логов (Log Analyzer)

## Описание

Этот проект представляет собой анализатор логов Nginx. 

Он находит последний лог-файл в заданной директории, парсит его, вычисляет статистику по запросам и генерирует HTML-отчет с результатами анализа.

## Возможности

- Автоматический поиск последнего лог-файла по шаблону nginx-access-ui.log-YYYYMMDD.gz
- Поддержка как сжатых (.gz), так и обычных лог-файлов
- Парсинг логов и вычисление статистики по URL:
- Количество запросов
- Процентное соотношение запросов
- Общее время обработки запросов
- Среднее, максимальное и медианное время обработки
- Генерация HTML-отчета с таблицей данных
- Гибкая настройка через JSON-конфигурацию
- Логирование работы скрипта с использованием structlog

## Установка и настройка

### Требования

- Python 3.12+
- Poetry (для управления зависимостями)

### Установка зависимостей

1. Установите Poetry, если он еще не установлен:

```
pip install poetry
```

2. Установите зависимости проекта:

```
poetry install
```

## Запуск

Для запуска анализатора выполните команду:

```
poetry run python log_analyzer.py --config config.json
```

### Аргументы командной строки

- --config <путь> – путь к конфигурационному файлу (по умолчанию config.json).

### Пример конфигурационного файла (config.json)

```
{
  "REPORT_SIZE": 10,
  "REPORT_DIR": "./reports",
  "LOG_DIR": "./log",
  "LOG_FILE": "./log_analyzer.log"
}
```

## Тестирование

Проект использует `pytest` для тестирования. Запустить тесты можно командой:

```
poetry run pytest
```